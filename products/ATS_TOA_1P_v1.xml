<?xml version="1.0"?>
<cd:ProductDefinition xmlns:cd="http://www.stcorp.nl/coda/definition/2008/07" id="ATS_TOA_1P_v1" format="binary" last-modified="2011-09-23">
  <cd:Record format="binary">
    <cd:Field name="mph">
      <cd:NamedType id="MPH"/>
    </cd:Field>
    <cd:Field name="sph">
      <cd:NamedType id="AATSR_SPH_long_v1"/>
    </cd:Field>
    <cd:Field name="dsd">
      <cd:Array format="ascii">
        <cd:Dimension><![CDATA[$num_dsd]]></cd:Dimension>
        <cd:NamedType id="DSD"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="summary_quality_ads">
      <cd:Array>
        <cd:Description>Summary Quality ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[0]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_sq_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[0] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="geolocation_ads">
      <cd:Array>
        <cd:Description>Grid pixel latitude and longtitude  topographic corrections ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[1]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_loc_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[1] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="scan_pixel_x_and_y_ads">
      <cd:Array>
        <cd:Description>Scan pixel x and y ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[2]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_scan_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[2] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_view_solar_angles_ads">
      <cd:Array>
        <cd:Description>Nadir view solar angles ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[3]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_sa_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[3] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_view_solar_angles_ads">
      <cd:Array>
        <cd:Description>Forward view solar angles ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[4]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_sa_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[4] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="visible_calib_coefs_gads">
      <cd:Array>
        <cd:Description>Visible calibration coefficients GADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[5]]]></cd:Dimension>
        <cd:NamedType id="ATS_VC1_AX_GADS_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[5] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_view_scan_pix_num_ads">
      <cd:Array>
        <cd:Description>Scan and pixel number nadir view ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[6]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_pix_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[6] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_view_scan_pix_num_ads">
      <cd:Array>
        <cd:Description>Scan and pixel number forward view ADS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[7]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_ADSR_pix_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[7] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_11500_12500_nm">
      <cd:Array>
        <cd:Description>12 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[8]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[8] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_10400_11300_nm">
      <cd:Array>
        <cd:Description>11 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[9]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[9] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_03505_03895_nm">
      <cd:Array>
        <cd:Description>3.7 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[10]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[10] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_01580_01640_nm">
      <cd:Array>
        <cd:Description>1.6 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[11]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[11] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_00855_00875_nm">
      <cd:Array>
        <cd:Description>0.87 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[12]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[12] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_00649_00669_nm">
      <cd:Array>
        <cd:Description>0.67 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[13]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[13] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_toa_mds_00545_00565_nm">
      <cd:Array>
        <cd:Description>0.55 micron nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[14]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[14] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_11500_12500_nm">
      <cd:Array>
        <cd:Description>12 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[15]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[15] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_10400_11300_nm">
      <cd:Array>
        <cd:Description>11 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[16]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[16] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_03505_03895_nm">
      <cd:Array>
        <cd:Description>3.7 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[17]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[17] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_01580_01640_nm">
      <cd:Array>
        <cd:Description>1.6 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[18]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[18] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_00855_00875_nm">
      <cd:Array>
        <cd:Description>0.87 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[19]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[19] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_00649_00669_nm">
      <cd:Array>
        <cd:Description>0.67 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[20]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[20] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_toa_mds_00545_00565_nm">
      <cd:Array>
        <cd:Description>0.55 micron forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[21]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_brgt_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[21] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_view_confidence_mds">
      <cd:Array>
        <cd:Description>Confidence words nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[22]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_conf_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[22] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_view_confidence_mds">
      <cd:Array>
        <cd:Description>Confidence words forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[23]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_conf_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[23] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="nadir_view_cloud_mds">
      <cd:Array>
        <cd:Description>Cloud flag nadir view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[24]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_cl_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[24] != 0]]></cd:Available>
    </cd:Field>
    <cd:Field name="fward_view_cloud_mds">
      <cd:Array>
        <cd:Description>Cloud flag forward view MDS</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[25]]]></cd:Dimension>
        <cd:NamedType id="ATS_TOA_1P_MDSR_cl_aatsr_rec_data"/>
      </cd:Array>
      <cd:Available><![CDATA[$ds_available[25] != 0]]></cd:Available>
    </cd:Field>
  </cd:Record>
  <cd:ProductVariable name="num_dsd">
    <cd:Init><![CDATA[$num_dsd = int(/mph/num_dsd)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="num_ds">
    <cd:Init><![CDATA[$num_ds = 26]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="ds_to_dsd_index">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[$ds_to_dsd_index[0] = index(/dsd, str(./ds_name) == "SUMMARY_QUALITY_ADS         "); $ds_to_dsd_index[1] = index(/dsd, str(./ds_name) == "GEOLOCATION_ADS             "); $ds_to_dsd_index[2] = index(/dsd, str(./ds_name) == "SCAN_PIXEL_X_AND_Y_ADS      "); $ds_to_dsd_index[3] = index(/dsd, str(./ds_name) == "NADIR_VIEW_SOLAR_ANGLES_ADS "); $ds_to_dsd_index[4] = index(/dsd, str(./ds_name) == "FWARD_VIEW_SOLAR_ANGLES_ADS "); $ds_to_dsd_index[5] = index(/dsd, str(./ds_name) == "VISIBLE_CALIB_COEFS_GADS    "); $ds_to_dsd_index[6] = index(/dsd, str(./ds_name) == "NADIR_VIEW_SCAN_PIX_NUM_ADS "); $ds_to_dsd_index[7] = index(/dsd, str(./ds_name) == "FWARD_VIEW_SCAN_PIX_NUM_ADS "); $ds_to_dsd_index[8] = index(/dsd, str(./ds_name) == "11500_12500_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[9] = index(/dsd, str(./ds_name) == "10400_11300_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[10] = index(/dsd, str(./ds_name) == "03505_03895_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[11] = index(/dsd, str(./ds_name) == "01580_01640_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[12] = index(/dsd, str(./ds_name) == "00855_00875_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[13] = index(/dsd, str(./ds_name) == "00649_00669_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[14] = index(/dsd, str(./ds_name) == "00545_00565_NM_NADIR_TOA_MDS"); $ds_to_dsd_index[15] = index(/dsd, str(./ds_name) == "11500_12500_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[16] = index(/dsd, str(./ds_name) == "10400_11300_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[17] = index(/dsd, str(./ds_name) == "03505_03895_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[18] = index(/dsd, str(./ds_name) == "01580_01640_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[19] = index(/dsd, str(./ds_name) == "00855_00875_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[20] = index(/dsd, str(./ds_name) == "00649_00669_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[21] = index(/dsd, str(./ds_name) == "00545_00565_NM_FWARD_TOA_MDS"); $ds_to_dsd_index[22] = index(/dsd, str(./ds_name) == "NADIR_VIEW_CONFIDENCE_MDS   "); $ds_to_dsd_index[23] = index(/dsd, str(./ds_name) == "FWARD_VIEW_CONFIDENCE_MDS   "); $ds_to_dsd_index[24] = index(/dsd, str(./ds_name) == "NADIR_VIEW_CLOUD_MDS        "); $ds_to_dsd_index[25] = index(/dsd, str(./ds_name) == "FWARD_VIEW_CLOUD_MDS        ")]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="ds_available">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[for i = 0 to $num_ds - 1 do $ds_available[i] = if($ds_to_dsd_index[i] != -1 && !(bytes(/dsd[$ds_to_dsd_index[i]]/filename, 8) == "NOT USED") && !(bytes(/dsd[$ds_to_dsd_index[i]]/filename, 7) == "MISSING"), 1, 0)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="ds_offset">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[for i = 0 to $num_ds - 1 do $ds_offset[i] = 8 * int(/dsd[$ds_to_dsd_index[i]]/ds_offset)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="num_dsr">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[for i = 0 to $num_ds - 1 do $num_dsr[i] = int(/dsd[$ds_to_dsd_index[i]]/num_dsr)]]></cd:Init>
  </cd:ProductVariable>
</cd:ProductDefinition>
